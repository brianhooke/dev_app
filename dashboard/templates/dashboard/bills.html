    <style>
        /* Compact Bills Table Styling */
        #billsTable {
            font-size: 12px;
        }
        
        #billsTable th {
            padding: 6px 4px !important;
            font-size: 11px;
            white-space: nowrap;
            vertical-align: middle;
            line-height: 1.2;
            position: sticky;
            top: 0;
            background-color: #f8f9fa;
            z-index: 10;
            box-shadow: 0 2px 2px -1px rgba(0, 0, 0, 0.1);
        }
        
        #billsTable td {
            padding: 4px 4px !important;
            vertical-align: middle;
            line-height: 1.3;
        }
        
        /* Compact form controls in table */
        #billsTable .form-control-sm {
            font-size: 11px;
            padding: 2px 4px;
            height: 26px;
            min-height: 26px;
        }
        
        #billsTable select.form-control-sm {
            padding-top: 2px;
            padding-bottom: 2px;
        }
        
        #billsTable input[type="text"],
        #billsTable input[type="number"] {
            font-size: 11px;
            padding: 2px 4px;
            height: 26px;
        }
        
        /* Compact buttons in table */
        #billsTable .btn {
            padding: 3px 8px;
            font-size: 11px;
            line-height: 1.2;
            min-height: 26px;
            height: 26px;
        }
        
        #billsTable .btn i {
            font-size: 12px;
        }
        
        /* Compact Allocations Table Styling */
        #allocationsTable {
            font-size: 11px;
        }
        
        #allocationsTable th {
            padding: 5px 4px !important;
            font-size: 10px;
            white-space: nowrap;
            vertical-align: middle;
            line-height: 1.2;
        }
        
        #allocationsTable td {
            padding: 3px 4px !important;
            vertical-align: middle;
            line-height: 1.2;
        }
        
        #allocationsTable .form-control-sm {
            font-size: 10px;
            padding: 2px 3px;
            height: 24px;
            min-height: 24px;
        }
        
        #allocationsTable input[type="text"],
        #allocationsTable input[type="number"] {
            font-size: 10px;
            padding: 2px 3px;
            height: 24px;
        }
        
        /* Sticky header for allocations table */
        #allocationsTable tbody tr {
            display: table;
            width: 100%;
            table-layout: fixed;
            background-color: #ffffff;
        }
        
        #allocationsTable tbody td {
            display: table-cell;
        }
        
        #allocationsTable tbody td:nth-child(1) {
            width: 28%;
        }
        
        #allocationsTable tbody td:nth-child(2) {
            width: 15%;
        }
        
        #allocationsTable tbody td:nth-child(3) {
            width: 15%;
        }
        
        #allocationsTable tbody td:nth-child(4) {
            width: 42%;
        }
    </style>

    <!-- Bills Section (hidden initially, shown when Bills clicked) -->
    <div id="billsInboxSection" style="display: none; height: 100%; flex-direction: column;">
        <!-- Bills navigation buttons -->
        <div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
            <button class="btn btn-primary bills-nav-btn" id="billsInboxBtn" data-mode="inbox">Inbox</button>
            <button class="btn btn-outline-primary bills-nav-btn" id="billsDirectBtn" data-mode="direct">Direct</button>
            <button class="btn btn-outline-primary bills-nav-btn" id="billsApprovalsBtn" data-mode="approvals">Approvals</button>
        </div>
        
        <div style="display: flex; flex: 1;">
            <!-- Left side: Bills Table (top 2/3) and Allocations (bottom 1/3) (50%) -->
            <div style="width: 50%; padding-right: 15px; display: flex; flex-direction: column;">
                <!-- Bills Table (flex to fill available space) -->
                <div id="billsTableContainer" style="flex: 1; overflow-y: auto; margin-bottom: 15px;">
                    <table class="table table-bordered table-hover" id="billsTable">
                        <thead>
                            <tr>
                                <th>Xero Instance / Project</th>
                                <th>Supplier</th>
                                <th>Invoice #</th>
                                <th>$ Net</th>
                                <th>$ GST</th>
                                <th>Email</th>
                                <th id="sendColumnHeader">Send to Xero</th>
                                <th id="lastColumnHeader">Archive</th>
                            </tr>
                        </thead>
                        <tbody id="billsTableBody">
                            <!-- Bills will be populated here via JavaScript -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Allocations section (bottom 1/3 - hidden for Bills - Inbox) -->
                <div id="allocationsSection" style="height: 33%; display: none; flex-direction: column;">
                    <div style="text-align: center; margin-bottom: 5px; flex-shrink: 0;">
                        <h6 id="allocationsTitle">Bill Allocations</h6>
                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; position: relative; overflow: hidden;">
                        <table class="table table-bordered table-sm" id="allocationsTable" style="margin-bottom: 0; display: flex; flex-direction: column; height: 100%;">
                            <thead style="flex-shrink: 0; display: block; position: sticky; top: 0; z-index: 10; background: white;">
                                <tr style="display: table; width: 100%; table-layout: fixed;">
                                    <th style="width: 28%;">Xero Account</th>
                                    <th style="width: 15%;">$ Net</th>
                                    <th style="width: 15%;">$ GST</th>
                                    <th style="width: 42%;">Description</th>
                                </tr>
                            </thead>
                            <tbody id="allocationsTableBody" style="flex: 1; display: block; overflow-y: auto;">
                                <!-- Allocations will be populated here via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    <div style="margin-top: 5px; display: flex; align-items: center; gap: 10px; flex-shrink: 0;">
                        <div style="flex: 0 0 28%; padding-left: 5px;">
                            <strong>Still to allocate:</strong>
                        </div>
                        <div style="flex: 0 0 15%; text-align: center; font-weight: bold;" id="remainingNet">
                            $0.00
                        </div>
                        <div style="flex: 0 0 15%; text-align: center; font-weight: bold;" id="remainingGst">
                            $0.00
                        </div>
                        <div style="flex: 1;"></div>
                        <button type="button" class="btn btn-sm btn-info" id="pullXeroAccountsBtn" style="display: none;">
                            <i class="fas fa-download"></i> Pull Accounts
                        </button>
                        <button type="button" class="btn btn-sm btn-success" id="addAllocationBtn">
                            <i class="fas fa-plus"></i> Add Row
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Right side: PDF Viewer (50% - full height) -->
            <div style="width: 50%; padding-left: 15px; display: flex; flex-direction: column; height: 100%;">
                <div id="viewerSection" style="flex: 1; display: flex; flex-direction: column;">
                    <div style="flex: 1; background-color: #f8f9fa; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden;">
                        <iframe 
                            id="billViewer" 
                            style="width: 100%; height: 100%; border: none; display: none;"
                            allow="fullscreen"
                            src="">
                        </iframe>
                        <div id="viewerPlaceholder" style="text-align: center; color: #6c757d;">
                            <i class="fas fa-file-pdf" style="font-size: 64px; margin-bottom: 10px;"></i>
                            <p>Click on a bill to view the attachment</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Approvals Section (hidden initially, loaded via AJAX) -->
    <div id="billsApprovalsSection" style="display: none; height: 100%; flex-direction: column;">
        <!-- Bills navigation buttons (duplicated for this section) -->
        <div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
            <button class="btn btn-outline-primary bills-nav-btn approvals-nav-btn" data-mode="inbox">Inbox</button>
            <button class="btn btn-outline-primary bills-nav-btn approvals-nav-btn" data-mode="direct">Direct</button>
            <button class="btn btn-primary bills-nav-btn approvals-nav-btn" data-mode="approvals">Approvals</button>
        </div>
        
        <!-- Approvals content loaded via AJAX -->
        <div id="approvalsContent" style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
            <!-- Content will be loaded via AJAX from invoices_approvals.html -->
        </div>
    </div>


{% include "dashboard/includes/bills_scripts.html" %}
