{% load static %}
{% load humanize %}

<!-- Include shared table styles -->
{% include "core/components/data_table_styles.html" %}

{% if show_totals %}
<style>
  .reusable-table #totalRow {
    background: var(--color-bg-muted);
    font-weight: 600;
  }
  
  .reusable-table #totalRow td {
    color: var(--color-text);
    border-bottom: none;
    border-top: 2px solid var(--color-border);
  }
</style>
{% endif %}

<div class="reusable-table-container">
  {% if table_title %}
  <div class="reusable-table-title">{{ table_title }}</div>
  {% endif %}
  <table class="reusable-table">
      <thead>
        <tr>
          {% for column in columns %}
            <th>{{ column }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% if rows %}
          {% for row in rows %}
            <tr {% if row.is_category %}class="category-row" data-toggle="collapse" data-target=".group{{ forloop.counter }}"{% endif %}{% if row.is_error %} class="row-error"{% endif %}>
              {% for cell in row.cells %}
                <td>
                  {% if row.is_category and forloop.first %}
                    <strong>{{ cell }}</strong>
                    <span class="dropdown-arrow">â–¼</span>
                  {% else %}
                    {{ cell }}
                  {% endif %}
                </td>
              {% endfor %}
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="{{ columns|length }}" style="text-align: center; padding: 20px; color: var(--color-text-muted);">
              No data available
            </td>
          </tr>
        {% endif %}
        
        {% if show_totals and totals %}
          <tr id="totalRow">
            {% for total in totals %}
              <td>{% if forloop.first %}<strong>{{ total }}</strong>{% else %}{{ total }}{% endif %}</td>
            {% endfor %}
          </tr>
        {% endif %}
      </tbody>
  </table>
</div>
