<!-- Invoices Unallocated Section Template -->
<!-- Uses reusable allocations section with AllocationsManager -->
{% load static %}

{% include "core/components/reusable_allocations_section.html" with section_id="invoice" main_table_columns=main_table_columns allocations_columns=allocations_columns allocations_title="Invoice Allocations" viewer_placeholder_text="Click on an invoice to view the PDF" viewer_placeholder_icon="fas fa-file-pdf" %}

<!-- Load AllocationsManager and Invoice Section JS -->
<script src="{% static 'core/js/allocations_manager.js' %}"></script>
<script src="{% static 'core/js/invoices_section.js' %}"></script>

<!-- Pass project PK to JavaScript (if available from context) -->
<script>
    // Project PK may come from various sources:
    // 1. Direct template context (standalone page)
    // 2. window.currentConstructionProject (within projects view)
    // 3. URL parameters
    if ('{{ project_pk }}' && '{{ project_pk }}' !== 'None') {
        window.projectPk = '{{ project_pk }}';
    }
</script>
